# Quickstart: Physical AI & Humanoid Robotics Book

**Purpose**: Developer setup guide for building and running the project locally

## Prerequisites

### Required Software

| Software | Version | Purpose |
|----------|---------|---------|
| Node.js | 20.x LTS | Docusaurus runtime |
| pnpm | 8.x+ | Package manager |
| Python | 3.11+ | Chatbot backend |
| Docker | 24.x+ | Local Qdrant instance |
| Git | 2.40+ | Version control |

### Accounts Required

| Service | Purpose | Required For |
|---------|---------|--------------|
| OpenAI | Embeddings + Chat | Chatbot functionality |
| Neon | PostgreSQL hosting | Chat session storage |
| Qdrant Cloud | Vector database | Production (optional for dev) |
| GitHub | Repository + Pages | Deployment |

## Quick Start (5 minutes)

### 1. Clone and Install

```bash
# Clone repository
git clone https://github.com/<username>/book.git
cd book

# Install frontend dependencies
pnpm install

# Install backend dependencies
cd chatbot
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt
cd ..
```

### 2. Configure Environment

```bash
# Copy example environment files
cp .env.example .env
cp chatbot/.env.example chatbot/.env
```

Edit `.env` (frontend):
```env
# No secrets needed for static site
DOCUSAURUS_URL=http://localhost:3000
```

Edit `chatbot/.env`:
```env
# OpenAI
OPENAI_API_KEY=sk-...

# Qdrant (local Docker)
QDRANT_HOST=localhost
QDRANT_PORT=6333

# Neon PostgreSQL
DATABASE_URL=postgresql://user:pass@host/db

# Optional: Use Qdrant Cloud instead of local
# QDRANT_URL=https://xxx.qdrant.io
# QDRANT_API_KEY=...
```

### 3. Start Local Services

```bash
# Terminal 1: Start Qdrant (Docker)
docker run -p 6333:6333 -p 6334:6334 qdrant/qdrant

# Terminal 2: Start Docusaurus
pnpm start

# Terminal 3: Start Chatbot Backend
cd chatbot
source venv/bin/activate
uvicorn src.api.main:app --reload --port 8000
```

### 4. Verify Setup

Open http://localhost:3000 - you should see the book homepage.

Test chatbot API:
```bash
curl http://localhost:8000/health
# Expected: {"status":"healthy",...}
```

## Development Workflows

### Writing Documentation

```bash
# Create new lesson
mkdir -p docs/module-1/week-01
touch docs/module-1/week-01/lesson-name.md
```

Lesson template:
```markdown
---
sidebar_position: 1
---

# Lesson Title

Learning objectives:
- Objective 1
- Objective 2

## Section Heading

Content here...

```python title="example.py"
# Code example
```

:::tip
Helpful tip here
:::
```

### Building for Production

```bash
# Build static site
pnpm build

# Preview production build
pnpm serve
```

### Indexing Book Content

```bash
cd chatbot
source venv/bin/activate

# Full reindex (first time or major changes)
python scripts/index_docs.py --full

# Incremental update (after edits)
python scripts/index_docs.py --incremental

# Verify index integrity
python scripts/index_docs.py --verify
```

### Running Tests

```bash
# Frontend tests
pnpm test

# Backend tests
cd chatbot
pytest

# With coverage
pytest --cov=src --cov-report=html
```

## Project Structure

```
book/
├── docs/                    # Documentation content
│   ├── intro.md
│   ├── lab-setup/
│   └── module-*/week-*/
├── src/                     # Docusaurus customizations
│   ├── components/
│   └── theme/
├── static/                  # Static assets
│   ├── img/
│   └── code-samples/
├── chatbot/                 # RAG backend
│   ├── src/
│   ├── scripts/
│   └── tests/
├── specs/                   # Spec-Kit Plus artifacts
├── docusaurus.config.ts
├── sidebars.ts
└── package.json
```

## Common Tasks

### Add a New Week

1. Create week directory:
   ```bash
   mkdir docs/module-1/week-03
   ```

2. Add `_category_.json`:
   ```json
   {
     "label": "Week 3: Services & Actions",
     "position": 3
   }
   ```

3. Create lesson files:
   ```bash
   touch docs/module-1/week-03/services.md
   touch docs/module-1/week-03/actions.md
   ```

### Add Code Sample

1. Add file to `static/code-samples/module-N/`:
   ```bash
   cp my_node.py static/code-samples/module-1/week-01-publisher.py
   ```

2. Reference in documentation:
   ```markdown
   Download: [publisher.py](/code-samples/module-1/week-01-publisher.py)
   ```

### Update Sidebar

Edit `sidebars.ts` to customize navigation:
```typescript
const sidebars = {
  tutorialSidebar: [
    'intro',
    {
      type: 'category',
      label: 'Lab Setup',
      items: ['lab-setup/overview', ...],
    },
    // Auto-generate from folder structure
    {
      type: 'autogenerated',
      dirName: 'module-1-robotic-nervous-system',
    },
  ],
};
```

### Deploy to GitHub Pages

```bash
# Manual deploy (uses gh-pages branch)
GIT_USER=<username> pnpm deploy

# Or push to main - GitHub Actions handles deployment
git push origin main
```

## Troubleshooting

### Docusaurus Build Fails

```bash
# Clear cache and rebuild
rm -rf .docusaurus node_modules/.cache
pnpm build
```

### Qdrant Connection Error

```bash
# Verify Docker container is running
docker ps | grep qdrant

# Check Qdrant logs
docker logs <container_id>
```

### Chatbot Returns Empty Responses

1. Verify content is indexed:
   ```bash
   python scripts/index_docs.py --verify
   ```

2. Check Qdrant collection exists:
   ```bash
   curl http://localhost:6333/collections/book_content
   ```

3. Verify OpenAI API key is valid:
   ```bash
   python -c "import openai; openai.models.list()"
   ```

## Environment Variables Reference

### Frontend (`.env`)

| Variable | Description | Required |
|----------|-------------|----------|
| `DOCUSAURUS_URL` | Base URL for local dev | No |

### Backend (`chatbot/.env`)

| Variable | Description | Required |
|----------|-------------|----------|
| `OPENAI_API_KEY` | OpenAI API key | Yes |
| `QDRANT_HOST` | Qdrant host | Yes (local) |
| `QDRANT_PORT` | Qdrant port | Yes (local) |
| `QDRANT_URL` | Qdrant Cloud URL | No (prod) |
| `QDRANT_API_KEY` | Qdrant Cloud key | No (prod) |
| `DATABASE_URL` | Neon connection string | Yes |
| `CORS_ORIGINS` | Allowed origins | No |

## Next Steps

1. Read the [Implementation Plan](./plan.md) for full architecture
2. Review [API Contracts](./contracts/chatbot-api.yaml)
3. Check [Data Model](./data-model.md) for entity details
4. Run `/sp.tasks` to generate implementation tasks
